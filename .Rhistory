fill = income) +
geom_density_ridges() +
theme_few()+
theme(plot.caption = element_text(size = 13L),
legend.position = "right",
axis.title.x = element_text(vjust = -1),
axis.text.y = element_blank(),
axis.ticks.y = element_blank(),
axis.text.x = element_text(hjust = 0.5),
strip.text.x = element_text(size = 10)) +
facet_wrap(~year, scales = "free") +
labs(title = "Mortes por 100 mil habitantes, por continente",
subtitle = "Tuberculose",
x = "Mortes por 100 mil habitantes",
y = "",
fill = "Renda") +
scale_fill_npg()
gapminder_mortes %>%
filter(year %in% c(1972, 1982, 1992, 2007)) %>%
filter(death_disease == "Tuberculosis") %>%
ggplot() +
aes(x = death_rate_100thousand_age_standardized,
y = fct_rev(income),
fill = income) +
geom_density_ridges() +
theme_few()+
theme(plot.caption = element_text(size = 13L),
legend.position = "right",
axis.title.x = element_text(vjust = -1),
axis.text.y = element_blank(),
axis.ticks.y = element_blank(),
axis.text.x = element_text(hjust = 0.5),
strip.text.x = element_text(size = 10,
face = "bold")) +
facet_wrap(~year, scales = "free") +
labs(title = "Mortes por 100 mil habitantes, por continente",
subtitle = "Tuberculose",
x = "Mortes por 100 mil habitantes",
y = "",
fill = "Renda") +
scale_fill_npg()
gapminder_mortes %>%
filter(year %in% c(1972, 1982, 1992, 2007)) %>%
filter(death_disease == "Tuberculosis") %>%
ggplot() +
aes(x = death_rate_100thousand_age_standardized,
y = fct_rev(income),
fill = income) +
geom_density_ridges() +
theme_few()+
theme(plot.caption = element_text(size = 13L),
legend.position = "right",
axis.title.x = element_text(vjust = -1),
axis.text.y = element_blank(),
axis.ticks.y = element_blank(),
axis.text.x = element_text(hjust = 0.5),
strip.text.x = element_text(size = 10,
color = "black")) +
facet_wrap(~year, scales = "free") +
labs(title = "Mortes por 100 mil habitantes, por continente",
subtitle = "Tuberculose",
x = "Mortes por 100 mil habitantes",
y = "",
fill = "Renda") +
scale_fill_npg()
gapminder_mortes %>%
filter(year %in% c(1972, 1982, 1992, 2007),
death_disease == "Tuberculosis") %>%
group_by(year) %>%
arrange(desc(death_rate_100thousand_age_standardized)) %>%
slice_head(n = 10) %>%
ungroup()%>%
ggplot() +
aes(x = death_rate_100thousand_age_standardized,
y = fct_reorder(country, death_rate_100thousand_age_standardized),
fill = income) +
geom_col() +
theme_minimal()+
theme(plot.caption = element_text(size = 13L),
legend.position = "right",
axis.text.x = element_text(angle = 90,
size = 5),
strip.text.y = element_text(angle = 0,
hjust = 0)) +
facet_wrap(~year, scales = "free") +
labs(title = "Mortes por 100 mil habitantes, por país e renda",
subtitle = "Tuberculose",
x = "Mortes por 100 mil habitantes",
y = "",
fill = "Renda") +
scale_fill_npg()
---
title: "CursoR - Introdução à análise de dados no R"
gapminder_mortes %>%
filter(year %in% c(1972, 1982, 1992, 2007)) %>%
filter(death_disease == "Tuberculosis") %>%
ggplot() +
aes(x = death_rate_100thousand_age_standardized,
y = fct_rev(income),
fill = income) +
geom_density_ridges() +
theme_few()+
theme(plot.caption = element_text(size = 13L),
legend.position = "right",
axis.title.x = element_text(vjust = -1),
axis.text.y = element_blank(),
axis.ticks.y = element_blank(),
axis.text.x = element_text(hjust = 0.5),
strip.text.x = element_text(size = 10,
color = "black")) +
facet_wrap(~year, scales = "free") +
labs(title = "Mortes por 100 mil habitantes, por continente",
subtitle = "Tuberculose",
x = "Mortes por 100 mil habitantes",
y = "",
fill = "Renda") +
scale_fill_npg()
gapminder_mortes %>%
filter(year %in% c(1972, 1982, 1992, 2007),
death_disease == "Tuberculosis") %>%
group_by(year) %>%
arrange(desc(death_rate_100thousand_age_standardized)) %>%
slice_head(n = 10) %>%
ungroup()%>%
ggplot() +
aes(x = death_rate_100thousand_age_standardized,
y = fct_reorder(country, death_rate_100thousand_age_standardized),
fill = income) +
geom_col() +
theme_minimal()+
theme(plot.caption = element_text(size = 13L),
legend.position = "right",
axis.text.x = element_text(angle = 90,
size = 5),
strip.text.y = element_text(angle = 0,
hjust = 0)) +
facet_wrap(~year, scales = "free") +
labs(title = "Mortes por 100 mil habitantes, por país e renda",
subtitle = "Tuberculose",
x = "Mortes por 100 mil habitantes",
y = "",
fill = "Renda") +
scale_fill_npg()
gapminder_mortes %>%
filter(year %in% c(1972, 1982, 1992, 2007),
death_disease == "Tuberculosis") %>%
group_by(year) %>%
arrange(desc(death_rate_100thousand_age_standardized)) %>%
slice_head(n = 10) %>%
ungroup()%>%
ggplot() +
aes(x = death_rate_100thousand_age_standardized,
y = fct_reorder(country, death_rate_100thousand_age_standardized),
fill = income) +
geom_col() +
theme_minimal()+
theme(plot.caption = element_text(size = 13L),
legend.position = "right",
axis.text.x = element_text(angle = 90,
size = 5),
strip.text.y = element_text(angle = 0,
hjust = 0)) +
facet_wrap(~year, scales = "free") +
labs(title = "Mortes por 100 mil habitantes, por país e renda",
subtitle = "Tuberculose",
x = "Mortes por 100 mil habitantes",
y = "",
fill = "Renda") +
scale_fill_npg()
#Manipulação
gapminder_mortes = gapminder %>%
left_join(mortes_doencas %>% rename(country = name) %>% select(-continent),
by = join_by(country, year)) %>%
mutate(income = case_when(
gdpPercap < 1035 ~ "Baixa renda",
gdpPercap >= 1035 & gdpPercap < 4085 ~ "Média-baixa renda",
gdpPercap >= 4085 & gdpPercap < 12615 ~ "Média-alta renda",
gdpPercap >= 12615 ~ "Alta renda"
))
gapminder_mortes %>%
filter(year %in% c(1972, 1982, 1992, 2007)) %>%
filter(death_disease == "Tuberculosis") %>%
ggplot() +
aes(x = death_rate_100thousand_age_standardized,
y = fct_rev(income),
fill = income) +
geom_density_ridges() +
theme_few()+
theme(plot.caption = element_text(size = 13L),
legend.position = "right",
axis.title.x = element_text(vjust = -1),
axis.text.y = element_blank(),
axis.ticks.y = element_blank(),
axis.text.x = element_text(hjust = 0.5),
strip.text.x = element_text(size = 10,
color = "black")) +
facet_wrap(~year, scales = "free") +
labs(title = "Mortes por 100 mil habitantes, por continente",
subtitle = "Tuberculose",
x = "Mortes por 100 mil habitantes",
y = "",
fill = "Renda") +
scale_fill_npg()
#Manipulação
gapminder_mortes = gapminder %>%
left_join(mortes_doencas %>% rename(country = name) %>% select(-continent),
by = join_by(country, year)) %>%
mutate(income = case_when(
gdpPercap < 1035 ~ "Baixa",
gdpPercap >= 1035 & gdpPercap < 4085 ~ "Média-baixa",
gdpPercap >= 4085 & gdpPercap < 12615 ~ "Média-alta",
gdpPercap >= 12615 ~ "Alta"
))
gapminder_mortes %>%
filter(year %in% c(1972, 1982, 1992, 2007)) %>%
filter(death_disease == "Tuberculosis") %>%
ggplot() +
aes(x = death_rate_100thousand_age_standardized,
y = fct_rev(income),
fill = income) +
geom_density_ridges() +
theme_few()+
theme(plot.caption = element_text(size = 13L),
legend.position = "right",
axis.title.x = element_text(vjust = -1),
axis.text.y = element_blank(),
axis.ticks.y = element_blank(),
axis.text.x = element_text(hjust = 0.5),
strip.text.x = element_text(size = 10,
color = "black")) +
facet_wrap(~year, scales = "free") +
labs(title = "Mortes por 100 mil habitantes, por continente",
subtitle = "Tuberculose",
x = "Mortes por 100 mil habitantes",
y = "",
fill = "Renda") +
scale_fill_npg()
gapminder_mortes %>%
filter(year %in% c(1972, 1982, 1992, 2007),
death_disease == "Tuberculosis") %>%
group_by(year) %>%
arrange(desc(death_rate_100thousand_age_standardized)) %>%
slice_head(n = 10) %>%
ungroup()%>%
ggplot() +
aes(x = death_rate_100thousand_age_standardized,
y = fct_reorder(country, death_rate_100thousand_age_standardized),
fill = income) +
geom_col() +
theme_minimal()+
theme(plot.caption = element_text(size = 13L),
legend.position = "right",
axis.text.x = element_text(angle = 90,
size = 5),
strip.text.y = element_text(angle = 0,
hjust = 0)) +
facet_wrap(~year, scales = "free") +
labs(title = "Mortes por 100 mil habitantes, por país e renda",
subtitle = "Tuberculose",
x = "Mortes por 100 mil habitantes",
y = "",
fill = "Renda") +
scale_fill_npg()
gapminder_mortes %>%
filter(year <= 2007) %>%
filter(death_disease == "Tuberculosis") %>%
ggplot() +
aes(x = gdpPercap,
y = death_rate_100thousand_age_standardized) +
geom_point(shape = "circle",
aes(colour = income,
size = pop),
alpha = 0.2) +
scale_x_continuous(trans = "log10",
labels = scales::unit_format(unit = "k",
scale = 1e-3)) +
geom_smooth(method = "lm",
color = "black",
se = F) +
stat_correlation(method = "pearson",
size = 2.5,
mapping = use_label(c("R", "R2", "n"))) +
facet_wrap(~year, scales = "free") +
theme_minimal() +
labs(title = "PIB per capita e Mortes por doenças imunopreveníveis",
subtitle = "Tuberculose",
x = "PIB per capita",
y = "Mortes por 100 mil habitantes",
color = "Renda",
shape = "População") +
scale_color_npg()
linha = data_2 %>%
ggplot() +
#Mapping
aes(x = peso,
y = imc,
color = imc) +
#Geometrias
geom_line(size = 2) +
geom_point(size = 4) +
#Títulos
labs(x = "Peso (kg)",
y = "IMC",
title = "Índice de massa corporal versus peso",
color = "IMC") +
#Modificando o tema
theme(axis.text.x = element_text(size = 10,
color = "black"),
axis.text.y = element_text(size = 10,
color = "black"),
plot.title = element_text(size = 12,
color = "black",
hjust = 0.5,
face = "bold"))  +
#Gradiente de cores
scale_color_gradient(low = "red",
high = "blue",
na.value = NA)
linha
linha %>%
ggplotly()
#Visualizar
boxplot_years
#Boxplot simples por ano
boxplot_years = cobertura_vacinal %>%
filter(type == "country",
vaccine == "MCV1",
year %in% c(1990, 2000, 2010, 2019)) %>%
ggplot() +
aes(x = "",
y = coverage,
fill = continent) +
geom_boxplot() +
scale_fill_brewer(palette = "Set2", direction = 1) +
theme_bw() +
theme(axis.text.x = element_text(angle = 45,
vjust = 1,
hjust = 1),
plot.margin = unit(c(1, 1, 1, 1), "cm"),
legend.position = "right") +
facet_wrap(vars(year), ncol = 4) +
labs(title = "Cobertura vacinal contra o sarampo",
subtitle = "Primeira dose (MCV1)",
x = "Continente",
y = "Cobertura vacinal (%)",
fill = "Continente") +
scale_fill_npg()
#Visualizar
boxplot_years
#Gráfico de barras simples
paises_barras_mortes = paises_mortes %>% #Dataframe
filter(death_disease == "Measles") %>%
mutate(name = fct_reorder(name, cumulativo)) %>%
slice_max(order_by = cumulativo, n = 10) %>%
ggplot() + #Chamando a função. Aqui se usa "+" em vez de "%>%"
#Mapeando os eixos
aes(x = cumulativo,
y = name,
fill = continent) +
#Geometrias
geom_col() +
geom_label(aes(x = cumulativo,
y = name,
label = cumulativo),
hjust = -0.2) +
#Tema
theme_light() +
#Labels
labs(title = "Mortes cumulativas por Sarampo, de 2000 a 2023",
x = "Mortes",
y = "Países") +
scale_fill_npg() +
#Eixo x
xlim(0, 10000) #Aumentar limites
paises_barras_mortes
paises_mortes
paises_anotados
#Gráfico de barras simples
paises_barras_mortes = paises_mortes %>% #Dataframe
inner_join(paises_anotados %>% select(-region_complete), by = "name") %>%
filter(death_disease == "Measles") %>%
mutate(name = fct_reorder(name, cumulativo)) %>%
slice_max(order_by = cumulativo, n = 10) %>%
ggplot() + #Chamando a função. Aqui se usa "+" em vez de "%>%"
#Mapeando os eixos
aes(x = cumulativo,
y = name,
fill = continent) +
#Geometrias
geom_col() +
geom_label(aes(x = cumulativo,
y = name,
label = cumulativo),
hjust = -0.2) +
#Tema
theme_light() +
#Labels
labs(title = "Mortes cumulativas por Sarampo, de 2000 a 2023",
x = "Mortes",
y = "Países") +
scale_fill_npg() +
#Eixo x
xlim(0, 10000) #Aumentar limites
paises_barras_mortes
#Gráfico de pontos simples
barras_mortes = continentes_mortes %>% #Dataframe
filter(death_disease == "Measles") %>%
mutate(cobertura_vacinal = fct_reorder(continent, cumulativo)) %>%
ggplot() + #Chamando a função. Aqui se usa "+" em vez de "%>%"
#Mapeando os eixos
aes(x = cumulativo,
y = cobertura_vacinal,
fill = cobertura_vacinal) +
#Geometrias
geom_col() +
geom_label(aes(x = cumulativo,
y = cobertura_vacinal,
label = cumulativo),
hjust = -0.2) +
#Tema
theme_light() +
#Labels
labs(title = "Mortes cumulativas por Sarampo, de 2000 a 2023",
x = "Mortes",
y = "Continentes") +
scale_fill_npg()+
#Eixo x
xlim(0, 10000) #Aumentar limites
barras_mortes
#Gráfico de barras simples
continente_barras_vac = continentes_vac %>% #Dataframe
filter(vaccine %in% "MCV1") %>%
mutate(continent = fct_reorder(continent, median)) %>%
ggplot() + #Chamando a função. Aqui se usa "+" em vez de "%>%"
#Mapeando os eixos
aes(x = median,
y = continent,
fill = continent) +
#Geometrias
geom_col() +
geom_text(aes(x = median,
y = continent,
label = median),
hjust = -0.5) +
#Tema
theme_light() +
#Labels
labs(title = "Cobertura vacinal",
x = "Mediana (Cobertura vacinal %)",
y = "Continentes",
fill = "Continente")  +
#Limites
xlim(0, 105) +
scale_fill_npg()
continente_barras_vac
#Gráfico de pontos simples
continentes_pontos_vac = continentes_vac %>% #Dataframe
filter(vaccine %in% "MCV1") %>%
mutate(continent = fct_reorder(continent, median)) %>%
#Chamando a função. Aqui se usa "+" em vez de "%>%"
ggplot() +
#Mapeando os eixos
aes(x = median,
y = continent,
color = continent) +
#Geometrias
geom_point() +
#Labels nos pontos
geom_label(aes(x = median,
y = continent,
label = median)) +
#Tema
theme_light() +
#Títulos
labs(title = "Cobertura vacinal",
x = "Mediana (Cobertura vacinal %)",
y = "Continentes")  +
scale_fill_npg()
continentes_pontos_vac
#Gráfico de pontos simples
continentes_pontos_vac = continentes_vac %>% #Dataframe
filter(vaccine %in% "MCV1") %>%
mutate(continent = fct_reorder(continent, median)) %>%
#Chamando a função. Aqui se usa "+" em vez de "%>%"
ggplot() +
#Mapeando os eixos
aes(x = median,
y = continent,
color = continent) +
#Geometrias
geom_point() +
#Labels nos pontos
geom_label(aes(x = median,
y = continent,
label = median)) +
#Tema
theme_light() +
#Títulos
labs(title = "Cobertura vacinal",
x = "Mediana (Cobertura vacinal %)",
y = "Continentes")  +
scale_color_npg()
continentes_pontos_vac
paises_anotados <- readRDS("~/Desktop/cursor/raw-data/paises_anotados.rds")
#Tabela de países
paises_anotados <- readRDS(here("raw-data", "paises_anotados.rds"))
library(here)
#Tabela de países
paises_anotados <- readRDS(here("raw-data", "paises_anotados.rds"))
paises_anotados
#Tabela de mortes por doença
mortes_doencas <- read_rds("Deaths_infectious_diseases_filtered.rds")
